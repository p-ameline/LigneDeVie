package com.ldv.client.canvas;

import com.google.gwt.user.client.DOM;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.FlowPanel;
import com.ldv.shared.model.LdvInt;

public class LdvScrollBar extends Composite
{
	private final FlowPanel     _mainpanel;
	private final Button        _rightScrollButton;
	private final Button        _leftScrollButton;
	private final LdvScrollArea _scrollArea;
	
	public LdvScrollBar(Button right, Button left){
		
		_rightScrollButton = right;
		_leftScrollButton = left;
		// _scrollArea = new LdvScrollArea(0.0,100.0);
		_scrollArea = new LdvScrollArea() ;
		//_scrollArea = new LdvScrollArea();
		
		_mainpanel = new FlowPanel() ;
		_mainpanel.addStyleName("ldvScrollBar") ;
		
		_mainpanel.add(_leftScrollButton);
		_leftScrollButton.getElement().setPropertyString("left", "0px");
		_mainpanel.add(_scrollArea);
		_mainpanel.add(_rightScrollButton);
		_rightScrollButton.getElement().setPropertyString("right", "0px");
		_mainpanel.getElement().setPropertyString("width", "100%");
		
		initWidget(_mainpanel) ;
	}
	
	/**
	 * This method is called immediately after a widget becomes attached to the
	 * browser's document.
	 */
	@Override
	protected void onLoad() {
	    // Reset the position attribute of the parent element
	    //DOM.setStyleAttribute(getElement(), "position", "relative");
	    //ResizableWidgetCollection.get().add(this);
	    redraw();
	  }
	
	/**
	 * Redraw the progress bar when something changes the layout.
	 */
	public void redraw() {
		LdvInt leftButtonWidth = new LdvInt(DOM.getElementPropertyInt(_leftScrollButton.getElement(), "offsetWidth"));
		LdvInt rightButtonWidth = new LdvInt(DOM.getElementPropertyInt(_rightScrollButton.getElement(), "offsetWidth"));
		//_scrollArea.getElement().setPropertyInt("left", leftButtonWidth);
		//_scrollArea.getElement().setPropertyInt("right", rightButtonWidth);
		// _mainpanel.setCellWidth(_leftScrollButton, leftButtonWidth.intToString(-1)+"px");
		// _mainpanel.setCellWidth(_rightScrollButton, rightButtonWidth.intToString(-1)+"px");
	}	
}
